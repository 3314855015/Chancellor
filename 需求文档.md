# 就业画像网站 MVP 版本需求文档

## 1. 项目概述

基于简约像素风格的就业画像网站，主要服务于教育就业领域，包含四种身份角色：管理员、考官（教师）、州牧（企业）和监生（学生）。

## 2. 技术栈

- 前端：Vue.js
- 后端：
  - 生产环境：Spring Framework
  - 开发环境：Supabase
- AI集成：n8n
- 部署平台：Vercel

## 3. 角色与功能需求

### 3.1 管理员

**核心功能**：
- 生成企业密钥【请帖】（用于创建州牧账号）
- 生成考官密钥【升官】（用于创建考官账号）
- 不能自主创建管理员账号

**界面需求**：
- 密钥生成面板（简约像素风格）
- 已生成密钥列表（带有效期显示）
- 密钥使用情况统计

### 3.2 考官（教师）

**核心功能**：
- 为关联学生分配初始能力点数（10点）
- 发布小任务到【布告栏】
- 评审学生完成的任务并分配额外点数（4点/任务）
- 生成教师keys用于学生关联
- 不能自主创建考官账号

**界面需求**：
- 学生管理面板（像素风格能力条）
- 布告栏发布界面
- 任务评审面板
- 教师keys生成与管理

### 3.3 州牧（企业）

**核心功能**：
- 拥有初始点数用于匹配学生
- 查看和描述匹配学生
- 不能自主创建州牧账号

**界面需求**：
- 企业信息管理
- 学生匹配面板
- 点数使用情况显示

### 3.4 监生（学生）

**核心功能**：
- 初始拥有10点能力点数
- 两种状态：在野/中举
- 未关联教师时可自由调整能力条（不存储）
- 查看推荐考官及其布告栏
- 通过教师keys关联考官后：
  - 能力条调整权限转交给考官
  - 可接取关联考官发布的任务

**界面需求**：
- 个人信息面板（像素风格）
- 能力条调整界面
- 教师keys输入框
- 布告栏浏览界面
- 任务接取与提交面板

## 4. 数据模型（关键字段）

### 用户表
- id: 唯一标识
- username: 用户名
- password: 加密密码
- role: 角色（admin/examiner/enterprise/student）
- status: 状态（对学生为在野/中举）
- created_at: 创建时间

### 密钥表
- id: 唯一标识
- key: 密钥内容
- type: 类型（请帖/升官/教师key）
- creator_id: 创建者ID
- used: 是否已使用
- used_by: 使用者ID（如已使用）
- expires_at: 过期时间

### 能力表
- user_id: 用户ID
- frontend_points: 前端能力点数（0-10）
- android_points: 安卓能力点数（0-10）
- backend_points: 后端能力点数（0-10）
- ai_points: AI能力点数（0-10）
- communication_points: 沟通力点数（0-10）
- creativity_points: 创造力点数（0-10）
- leadership_points: 领导力点数（0-10）
- updated_at: 最后更新时间

### 精通记录表
- id: 唯一标识
- user_id: 用户ID
- ability_type: 能力类型（frontend/android/backend）
- mastery_name: 精通名称
- mastery_time: 精通获得时间
- expires_at: 精通过期时间
- is_active: 是否有效（true/false）
- created_at: 记录创建时间

### 能力精通机制说明

**7大能力定义**：
1. **前端** - JavaScript、Vue、React、TypeScript
2. **安卓** - Kotlin编程语言、Android Jetpack组件、Flutter跨平台开发框架、MVVM架构模式
3. **后端** - SpringBoot、Python、C++
4. **AI** - 不需要教师进行方向特化
5. **沟通力** - 不需要精通
6. **创造力** - 不需要精通
7. **领导力** - 不需要精通

**精通触发条件**：
- 仅前端、安卓、后端三个能力支持精通机制
- 当能力值达到10点阈值时，教师可为学生选择精通方向
- 精通后对应能力点数清零，获得限时3个月的精通状态

**精通选项**：
- **前端精通**：
  - Vue专家
  - React大师
  - TypeScript高手
  - 全栈前端工程师

- **安卓精通**：
  - Kotlin专家
  - Android Jetpack大师
  - Flutter跨平台专家
  - MVVM架构师

- **后端精通**：
  - SpringBoot专家
  - Python高手
  - C++大师
  - 微服务架构师

**精通机制规则**：
1. 精通状态持续3个月，到期后自动失效
2. 重复选择相同精通会刷新过期时间
3. 精通期间显示对应的荣誉动画
4. 同一时间可以拥有多个不同的精通状态（前端、安卓、后端可同时精通）
5. 同一能力的精通状态不能重复（如不能同时拥有两个前端精通）
6. 精通失效后，学生可重新积累能力点数

### 任务表
- id: 唯一标识
- examiner_id: 发布考官ID
- title: 任务标题
- description: 任务描述
- points: 奖励点数
- deadline: 截止时间
- status: 状态（开放/进行中/已完成）

### 任务接取表
- task_id: 任务ID
- student_id: 学生ID
- status: 状态（进行中/提交待审/已完成）
- submission: 提交内容
- submitted_at: 提交时间
- reviewed_at: 评审时间

## 5. API端点规划

### 认证相关
- POST /api/auth/login - 用户登录
- POST /api/auth/register - 用户注册（仅限学生）
- POST /api/auth/upgrade - 使用密钥升级账户

### 管理员专属
- POST /api/admin/generate-key - 生成密钥
- GET /api/admin/keys - 获取密钥列表

### 考官专属
- POST /api/examiner/tasks - 发布任务
- GET /api/examiner/students - 获取关联学生列表
- POST /api/examiner/abilities - 分配学生能力点数
- POST /api/examiner/review - 评审学生任务
- POST /api/examiner/generate-key - 生成教师key
- POST /api/examiner/mastery - 为学生设置精通（仅限前端、安卓、后端能力达到10点时）
- GET /api/examiner/masteries - 获取学生的精通记录

### 州牧专属
- GET /api/enterprise/students - 获取匹配学生列表
- POST /api/enterprise/match - 匹配学生

### 监生专属
- GET /api/student/abilities - 获取能力点数
- POST /api/student/abilities - 更新能力点数（仅限在野状态）
- POST /api/student/link - 关联教师
- GET /api/student/tasks - 获取可接取任务
- POST /api/student/tasks - 接取/提交任务
- GET /api/student/masteries - 获取当前精通状态和荣誉动画信息

## 6. 界面设计要点（前端已大致实现）

1. **整体风格**：
   - 现代简约风格，天蓝色、米色、白色为主色调
   - 容器悬浮设计，无边框，有阴影等动态效果
   - 圆角设计，渐变背景

2. **关键组件**：
   - 悬浮式能力条（可拖动，带阴影效果）
   - 悬浮式布告栏（卡片式设计）
   - 悬浮式密钥输入框（现代简约风格）
   - 状态指示灯（悬浮式设计，在野/中举状态）
   - 精通状态显示面板（悬浮卡片，支持同时显示多个精通类型和剩余时间）
   - 荣誉动画区域（悬浮式特效展示区）

3. **动效**：
   - 能力条调整时的平滑动画
   - 任务接取/完成时的悬浮特效
   - 状态切换时的淡入淡出动画
   - 精通激活时的荣誉动画（限时3个月显示，支持多个精通同时展示）
   - 精通即将到期的提醒动画
   - 精通刷新时的悬浮特效
   - 多个精通状态叠加时的协调动画

## 7. 开发与部署计划

### 开发阶段
1. 搭建基础框架（1周）
2. 实现核心身份系统（2周）
3. 开发各角色核心功能（3周）
4. 实现像素风格UI（2周）
5. 集成测试（1周）

### 部署计划
- 开发环境：使用Supabase后端，部署在Vercel
- 生产环境：迁移至Spring后端，保持Vercel前端部署
- AI集成：通过n8n实现简单的推荐和匹配逻辑

## 8. MVP验收标准

1. 四种身份角色能正确创建和升级
2. 能力点数系统正常工作（7大能力：前端、后端、安卓、AI、沟通力、创造力、领导力）
3. 任务发布、接取和评审流程完整
4. 教师keys关联机制有效
5. 现代简约UI风格已实现（天蓝色、米色、白色为主，容器悬浮设计）
6. 基础的通知系统工作正常
7. 精通机制正常工作（前端、安卓、后端能力达到10点时可选择精通）
8. 精通状态显示和荣誉动画正常展示
9. 精通时间限制（3个月）和刷新机制有效

## 9. 后续扩展方向

1. 增加更多能力维度
2. 实现企业-学生双向匹配
3. 添加成就系统
4. 引入社交元素（学生间比较）
5. 开发移动端应用
6. 增强AI推荐算法

## 10. 风险与应对

1. **密钥滥用风险**：
   - 实现密钥有效期
   - 添加使用次数限制

2. **点数平衡问题**：
   - 初期严格限制点数分配
   - 预留后期调整空间

3. **UI性能问题**：
   - 优化像素动画性能
   - 实现懒加载

4. **数据安全**：
   - 实施严格的角色权限控制
   - 敏感操作需二次验证